<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Ecosystem Sandbox - 神经网络生态系统沙盒</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app">
        <!-- 顶部标题 -->
        <header class="header">
            <h1>🧬 AI Ecosystem Sandbox</h1>
            <p>神经网络驱动的进化生态系统</p>
        </header>

        <!-- 主界面 -->
        <div class="main-container">
            <!-- 左侧控制面板 -->
            <aside class="control-panel">
                <div class="panel-section">
                    <h3>📊 生态系统统计</h3>
                    <div class="stats">
                        <div class="stat-item">
                            <span class="stat-label">生物数量:</span>
                            <span id="creature-count" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">植物数量:</span>
                            <span id="plant-count" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">世代:</span>
                            <span id="generation-count" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">最高适应度:</span>
                            <span id="best-fitness" class="stat-value">0</span>
                        </div>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>🎮 控制</h3>
                    <div class="controls">
                        <button id="btn-start" class="btn btn-primary">▶ 开始</button>
                        <button id="btn-pause" class="btn btn-secondary">⏸ 暂停</button>
                        <button id="btn-reset" class="btn btn-danger">↺ 重置</button>
                    </div>
                    <div class="view-toggle">
                        <label>视图模式:</label>
                        <button id="btn-2d" class="btn btn-mode active">2D</button>
                        <button id="btn-3d" class="btn btn-mode">3D ⭐</button>
                    </div>
                    <div class="speed-control">
                        <label for="sim-speed">模拟速度:</label>
                        <input type="range" id="sim-speed" min="1" max="10" value="1">
                        <span id="speed-value">1x</span>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>⚙️ 参数设置</h3>
                    <div class="param-group">
                        <label for="initial-creatures">初始生物数:</label>
                        <input type="number" id="initial-creatures" value="20" min="5" max="100">
                    </div>
                    <div class="param-group">
                        <label for="mutation-rate">变异率:</label>
                        <input type="range" id="mutation-rate" min="1" max="50" value="10">
                        <span id="mutation-value">10%</span>
                    </div>
                    <div class="param-group">
                        <label for="food-spawn-rate">食物生成率:</label>
                        <input type="range" id="food-spawn-rate" min="1" max="20" value="5">
                        <span id="food-value">5</span>
                    </div>
                    <div class="param-group">
                        <label for="predator-ratio">捕食者比例:</label>
                        <input type="range" id="predator-ratio" min="0" max="30" value="10">
                        <span id="predator-value">10%</span>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>🧠 选中生物</h3>
                    <div id="selected-creature-info" class="creature-info">
                        <p class="hint">点击生物查看详情</p>
                    </div>
                    <canvas id="brain-viz" width="200" height="150"></canvas>
                </div>
            </aside>

            <!-- 中间模拟区域 -->
            <main class="simulation-area">
                <canvas id="world-canvas"></canvas>
                <div class="overlay-info">
                    <div class="legend">
                        <div class="legend-item">
                            <span class="legend-color herbivore"></span>
                            <span>草食动物 (绿色)</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color predator"></span>
                            <span>捕食者 (红色)</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color plant"></span>
                            <span>植物 (青色)</span>
                        </div>
                    </div>
                </div>
            </main>

            <!-- 右侧图表 -->
            <aside class="charts-panel">
                <div class="chart-container">
                    <h4>种群历史</h4>
                    <canvas id="population-chart" width="250" height="150"></canvas>
                </div>
                <div class="chart-container">
                    <h4>适应度进化</h4>
                    <canvas id="fitness-chart" width="250" height="150"></canvas>
                </div>
                <div class="chart-container">
                    <h4>物种分布</h4>
                    <canvas id="species-chart" width="250" height="150"></canvas>
                </div>
            </aside>
        </div>

        <!-- 底部说明 -->
        <footer class="footer">
            <p>
                💡 <strong>操作说明:</strong> 
                鼠标拖拽移动视角 | 滚轮缩放 | 点击生物查看神经网络 | 
                生物通过神经网络学习觅食、逃避、繁殖 |
                <a href="https://github.com/YOUR_USERNAME/ai-ecosystem-sandbox" target="_blank">GitHub Repo</a>
            </p>
        </footer>
    </div>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    
    <!-- 加载JavaScript -->
    <script src="js/neuralnet.js"></script>
    <script src="js/creature.js"></script>
    <script src="js/ecosystem.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/3d/renderer3d.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
