<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Sandbox - 数学可视化沙盒</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app">
        <!-- 顶部标题 -->
        <header class="header">
            <h1>🧮 Math Sandbox</h1>
            <p>数学可视化探索沙盒 - 函数、分形、几何</p>
        </header>

        <!-- 主界面 -->
        <div class="main-container">
            <!-- 左侧控制面板 -->
            <aside class="control-panel">
                <!-- 模式选择 -->
                <div class="panel-section">
                    <h3>📐 模式选择</h3>
                    <div class="mode-buttons">
                        <button class="btn-mode active" data-mode="function2d">2D 函数</button>
                        <button class="btn-mode" data-mode="function3d">3D 函数</button>
                        <button class="btn-mode" data-mode="fractal">分形</button>
                        <button class="btn-mode" data-mode="parametric">参数方程</button>
                        <button class="btn-mode" data-mode="vector">向量场</button>
                    </div>
                </div>

                <!-- 公式输入 -->
                <div class="panel-section">
                    <h3>📝 公式输入</h3>
                    <div class="formula-inputs" id="formula-container">
                        <!-- 动态生成 -->
                    </div>
                    <button id="btn-plot" class="btn btn-primary">📊 绘制</button>
                    <button id="btn-clear" class="btn btn-secondary">🗑️ 清除</button>
                </div>

                <!-- 预设函数 -->
                <div class="panel-section">
                    <h3>📚 预设</h3>
                    <div class="presets" id="presets-container">
                        <!-- 动态生成 -->
                    </div>
                </div>

                <!-- 参数设置 -->
                <div class="panel-section">
                    <h3>⚙️ 参数</h3>
                    <div class="params" id="params-container">
                        <!-- 动态生成 -->
                    </div>
                </div>

                <!-- 帮助提示 -->
                <div class="panel-section">
                    <h3>💡 可用函数</h3>
                    <div class="help-text">
                        <code>sin(x), cos(x), tan(x)</code><br>
                        <code>exp(x), log(x), sqrt(x)</code><br>
                        <code>pow(x, 2), abs(x)</code><br>
                        <code>PI, E</code><br>
                        <code>noise(x, y), gaussian(x)</code>
                    </div>
                </div>
            </aside>

            <!-- 中间绘图区域 -->
            <main class="simulation-area">
                <canvas id="canvas-2d"></canvas>
                <div id="canvas-3d-container" style="display: none;"></div>
                
                <!-- 坐标信息 -->
                <div class="coordinate-info" id="coord-info">
                    x: 0, y: 0
                </div>
                
                <!-- 图例 -->
                <div class="overlay-info">
                    <div class="legend">
                        <div class="legend-item">
                            <span class="legend-key">🖱️ 拖拽</span>
                            <span>平移</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-key">🔍 滚轮</span>
                            <span>缩放</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-key">⌨️ 双击</span>
                            <span>重置视图</span>
                        </div>
                    </div>
                </div>
            </main>

            <!-- 右侧信息面板 -->
            <aside class="info-panel">
                <div class="panel-section">
                    <h3>📊 当前视图</h3>
                    <div class="view-info" id="view-info">
                        <!-- 动态更新 -->
                    </div>
                </div>
                
                <div class="panel-section">
                    <h3>📈 函数列表</h3>
                    <div class="function-list" id="function-list">
                        <!-- 动态更新 -->
                    </div>
                </div>
            </aside>
        </div>

        <!-- 底部说明 -->
        <footer class="footer">
            <p>
                🧮 <strong>Math Sandbox</strong> - 
                支持 2D/3D 函数绘图、分形可视化、参数方程、向量场 |
                <a href="https://github.com/li-guohao/li-guohao.github.io" target="_blank">GitHub</a>
            </p>
        </footer>
    </div>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    
    <!-- Math Sandbox Scripts -->
    <script src="js/math/engine.js"></script>
    <script src="js/math/plotter.js"></script>
    <script src="js/math/fractals.js"></script>
    <script src="js/math/renderer3d.js"></script>
    <script src="js/math/main.js"></script>
</body>
</html>
